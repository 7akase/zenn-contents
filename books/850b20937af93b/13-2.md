---
title: "13.2 自由モノイドの普遍構成"
---


\section{Free Monoid Universal Construction}

If you recall our previous experiences with universal constructions, you
might notice that it's not so much about constructing something as about
selecting an object that best fits a given pattern. So if we want to use
the universal construction to ``construct'' a free monoid, we have to
consider a whole bunch of monoids from which to pick one. We need a
whole category of monoids to choose from. But do monoids form a category?

Let's first look at monoids as sets equipped with additional structure
defined by unit and multiplication. We'll pick as morphisms those
functions that preserve the monoidal structure. Such
structure-preserving functions are called \newterm{homomorphisms}. A monoid
homomorphism must map the product of two elements to the product of the
mapping of the two elements:

\src{snippet04}
and it must map unit to unit.

For instance, consider a homomorphism from lists of integers to
integers. If we map \code{{[}2{]}} to 2 and \code{{[}3{]}} to 3, we
have to map \code{{[}2, 3{]}} to 6, because concatenation

\src{snippet05}
becomes multiplication

\src{snippet06}
Now let's forget about the internal structure of individual monoids, and
only look at them as objects with corresponding morphisms. You get a
category $\cat{Mon}$ of monoids.

Okay, maybe before we forget about internal structure, let us notice an
important property. Every object of $\cat{Mon}$ can be trivially mapped
to a set. It's just the set of its elements. This set is called the
\newterm{underlying} set. In fact, not only can we map objects of
$\cat{Mon}$ to sets, but we can also map morphisms of $\cat{Mon}$
(homomorphisms) to functions. Again, this seems sort of trivial, but it
will become useful soon. This mapping of objects and morphisms from
$\cat{Mon}$ to $\Set$ is in fact a functor. Since this functor
``forgets'' the monoidal structure --- once we are inside a plain set,
we no longer distinguish the unit element or care about multiplication
--- it's called a \newterm{forgetful functor}. Forgetful functors come up
regularly in category theory.

We now have two different views of $\cat{Mon}$. We can treat it just
like any other category with objects and morphisms. In that view, we
don't see the internal structure of monoids. All we can say about a
particular object in $\cat{Mon}$ is that it connects to itself and to
other objects through morphisms. The ``multiplication'' table of
morphisms --- the composition rules --- are derived from the other view:
monoids-as-sets. By going to category theory we haven't lost this view
completely --- we can still access it through our forgetful functor.

To apply the universal construction, we need to define a special
property that would let us search through the category of monoids and
pick the best candidate for a free monoid. But a free monoid is defined
by its generators. Different choices of generators produce different
free monoids (a list of \code{Bool} is not the same as a list of
\code{Int}). Our construction must start with a set of generators. So
we're back to sets!

That's where the forgetful functor comes into play. We can use it to
X-ray our monoids. We can identify the generators in the X-ray images of
those blobs. Here's how it works:

We start with a set of generators, $x$. That's a set in
$\Set$.

The pattern we are going to match consists of a monoid $m$ --- an
object of $\cat{Mon}$ --- and a function $p$ in $\Set$:

\src{snippet07}
where $U$ is our forgetful functor from $\cat{Mon}$ to
$\Set$. This is a weird heterogeneous pattern --- half in
$\cat{Mon}$ and half in $\Set$.

The idea is that the function $p$ will identify the set of
generators inside the X-ray image of $m$. It doesn't matter that
functions may be lousy at identifying points inside sets (they may
collapse them). It will all be sorted out by the universal construction,
which will pick the best representative of this pattern.

\begin{figure}[H]
\centering
\includegraphics[width=0.4\textwidth]{images/monoid-pattern.jpg}
\end{figure}

\noindent
We also have to define the ranking among candidates. Suppose we have
another candidate: a monoid $n$ and a function that identifies
the generators in its X-ray image:

\src{snippet08}
We'll say that $m$ is better than $n$ if there is a
morphism of monoids (that's a structure-preserving homomorphism):

\src{snippet09}
whose image under $U$ (remember, $U$ is a functor, so it
maps morphisms to functions) factorizes through $p$:

\src{snippet10}
If you think of $p$ as selecting the generators in $m$;
and $q$ as selecting ``the same'' generators in $n$; then
you can think of $h$ as mapping these generators between the two
monoids. Remember that $h$, by definition, preserves the monoidal
structure. It means that a product of two generators in one monoid will
be mapped to a product of the corresponding two generators in the second
monoid, and so on.

\begin{figure}[H]
\centering
\includegraphics[width=0.4\textwidth]{images/monoid-ranking.jpg}
\end{figure}

\noindent
This ranking may be used to find the best candidate --- the free monoid.
Here's the definition:

\begin{quote}
We'll say that $m$ (together with the function $p$) is the
\textbf{free monoid} with the generators $x$ if and only if there
is a \emph{unique} morphism $h$ from $m$ to any other
monoid $n$ (together with the function $q$) that satisfies
the above factorization property.
\end{quote}
Incidentally, this answers our second question. The function
$U h$ is the one that has the power to collapse multiple
elements of $U m$ to a single element of $U n$. This
collapse corresponds to identifying some elements of the free monoid.
Therefore any monoid with generators $x$ can be obtained from the
free monoid based on $x$ by identifying some of the elements. The
free monoid is the one where only the bare minimum of identifications
have been made.

We'll come back to free monoids when we talk about adjunctions.


（和訳：[@ashiato45](https://twitter.com/ashiato45)）
