---
title: "1.1 関数としての射"
---
すでに話が抽象的になりすぎただろうか？ でも絶望しないでほしい．具体的な話をしよう．射は関数であると考えよう．関数 $f$ は型 $A$ の引数を取り，型 $B$ の値を返すとする．もう一つ関数 $g$ は $B$ の引数を取り $C$ の値を返すとする．すると $f$ の戻り値を $g$ に渡すことができる．これで $A$ を取り $C$ を返す関数ができた．

数学では，このような合成は関数の間の小さな丸で表される：$g \circ f$．合成は *右から左* の順になっていることに注意しよう．この記法は紛らわしく感じる人もいるだろう．あなたは Unix でのパイプ記法に馴染みがあるかも知れない．例えば次のような：

```
lsof | grep Chrome
```

あるいは F# における chevron `>>` に．これらはどちらも *左から右へ* 合成される．しかし数学や Haskell においては，関数は *右から左* に合成される．$g \circ f$ を "$g$ after $f$" と読むと分かりやすいだろう^[訳注：残念ながらこの順に読める適切な日本語訳はなさそう．]．

このことをもっと分かりやすくするため，C のコードを書いてみよう．関数 `f` は型 `A` の引数を取り型 `B` の値を返す:

```C
B f(A a);
```

そしてもう一つ:

```C
C g(B b);
```

これらの合成は:

```C
C g_after_f(A a)
{
    return g(f(a));
}
```

今度は C だが，再び *右から左へ* の合成 `g(f(a));` が見られる．

ここで C++ Standard Library のテンプレートで，二つの関数を取ってそれらの合成を返すものがあると言えれば良いのだが，残念ながらそれがない．なので代わりに Haskell でやってみよう．ここに `A` から `B` への関数の宣言がある：

```haskell
f :: A -> B
```

同様に:

```haskell
g :: B -> C
```

これらの合成は:

```haskell
g . f
```

いかに Haskell で物事がシンプルに表現されるか見てしまうと，C++ で関数に関する概念を素直に表現できない事実に少し戸惑ってしまう．さらに言えば，Haskell では Unicode 文字が使えるので，合成は次のようにも書ける：

```haskell
g ◦ f
```

さらに Unicode のダブルコロン^[ダブルコロンの Unicode 文字が見つけられなかったので普通のコロン2個を書く．]や矢印も使える：

```haskell
f :: A → B
```

これが Haskell の第一のレッスンだ：ダブルコロンは "…は次の型を持つ…" の意味である．関数型は二つの型の間に矢印を入れることで作られる．二つの関数の合成は，それらの間にピリオド `.` （または小さな丸 `◦`）を入れることで得られる．

（和訳：[@taketo1024](https://zenn.dev/taketo1024)）
